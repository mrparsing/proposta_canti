<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../../styles/style_index.css">
    <script src="../../../javascript/theme.js"></script>
    <title>Proposta Canti - Domenica Tempo Ordinario</title>
    <style>
        .navbar {
            background-color: #2a9a5c;
        }
    </style>

    <script>
        // Funzione per ottenere i parametri dall'URL
        function getQueryParams() {
            const urlParams = new URLSearchParams(window.location.search);
            const numero = urlParams.get('numero');
            const anno = urlParams.get('anno');
            console.log(numero);
            return { numero, anno };
        }

        // Funzione per popolare la pagina
        function populatePage(data, numero, anno) {
            // Cerca la celebrazione che corrisponde ai parametri "numero" e "anno"
            const celebrazione = data.celebrazioni.find(celebra => celebra.numero === numero && celebra.anno === anno);

            if (celebrazione) {
                // Aggiorna il titolo della pagina
                document.title = `${numero}° domenica tempo ordinario - Anno ${anno}`;
                
                // Popola i vari campi con i dati della celebrazione
                document.querySelector('h1').textContent = `${numero}° DOMENICA DEL TEMPO ORDINARIO - ANNO ${anno}`;
                document.querySelector('#antifona-ingresso').textContent = celebrazione.antifona_ingresso;
                document.querySelector('#canto-ingresso').textContent = celebrazione.canto_ingresso;
                document.querySelector('#salmo').href = celebrazione.salmo_link; // Link al PDF del salmo
            } else {
                document.body.innerHTML = '<p>Errore: Celebrazione non trovata.</p>';
            }
        }

        // Carica il file JSON
        document.addEventListener('DOMContentLoaded', function () {
            const { numero, anno } = getQueryParams();

            // Carica il file JSON
            fetch('../../../json/celebrazioni.json')
                .then(response => response.json())
                .then(data => {
                    populatePage(data, numero, anno); // Popola la pagina con i dati corretti
                })
                .catch(error => console.error('Errore nel caricamento del JSON:', error));
        });
    </script>
</head>

<body>
    <div class="navbar" id="myNavbar">
        <h1>Proposta canti</h1>
        <span class="menu-toggle" onclick="toggleMenu()">☰</span>
        <div class="navbar-buttons">
            <button onclick="location.href='../../../index.html'">Home</button>
            <button onclick="location.href='../../../nav-bar/elenco_canti.html'">Elenco canti</button>
            <button onclick="location.href='../../../nav-bar/spartiti_salmi.html'">Spartiti salmi</button>
            <button onclick="location.href='../../../nav-bar/anno_liturgico.html'">Anni liturgici</button>
            <button onclick="location.href='../../../nav-bar/salmi_eventi_speciali.html'">Eventi speciali</button>
            <button onclick="location.href='../../../nav-bar/imp_supporto.html'">Impostazioni/Supporto</button>
        </div>
        <input type="text" placeholder="Cerca canti...">
    </div>

    <div class="responsive-container">
        <h1></h1> <!-- Questo verrà popolato dal JSON -->
        
        <h2>Antifona d'ingresso</h2>
        <p id="antifona-ingresso"></p> <!-- Verrà popolato con il testo dell'antifona d'ingresso -->

        <h3>Canto d'ingresso</h3>
        <p id="canto-ingresso"></p> <!-- Verrà popolato con il titolo del canto d'ingresso -->

        <h2>SALMO RESPONSORIALE</h2>
        <a id="salmo" class="link_salmo" href="" download>Salmo Responsoriale</a>
    </div>

    <script>
        function toggleMenu() {
            const navbar = document.getElementById('myNavbar');
            navbar.classList.toggle('active'); // Toggle the class to show/hide the menu
        }
    </script>
</body>

</html>
