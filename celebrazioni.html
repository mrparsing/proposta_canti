<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles/style_index.css">
    <script src="javascript/theme.js"></script>
    <title>Proposta Canti - Domenica Tempo Ordinario</title>
    <style>
        .navbar {
            background-color: #2a9a5c;
        }
    </style>

    <script>
        function getQueryParams() {
            const urlParams = new URLSearchParams(window.location.search);
            const numero = urlParams.get('numero');
            const anno = urlParams.get('anno');
            return { numero, anno };
        }

        function populatePage(data, numero, anno) {
            const celebrazione = data.celebrazioni.find(celebra => celebra.numero === parseInt(numero));

            if (celebrazione) {
                document.title = `${numero}° domenica tempo ordinario - Anno ${anno}`;
                document.querySelector('#title').textContent = `${numero}° DOMENICA DEL TEMPO ORDINARIO - ANNO ${anno}`;
                document.querySelector('#antifona-ingresso').textContent = celebrazione.antifona_ingresso;
                document.querySelector('#canto-ingresso').textContent = celebrazione.canto_ingresso || "N/A";
                document.querySelector('#atto-penitenziale').textContent = celebrazione.atto_penitenziale;
                document.querySelector('#tropo-1').innerHTML = celebrazione.tropo_1;
                document.querySelector('#tropo-2').innerHTML = celebrazione.tropo_2;
                document.querySelector('#tropo-3').innerHTML = celebrazione.tropo_3;
                document.querySelector('#prima-lettura').textContent = celebrazione.prima_lettura_testo;
                document.querySelector('#salmo').textContent = celebrazione.salmo_testo || "N/A";
                const link_salmo = celebrazione.salmo_link;
                document.getElementById('link_salmo').setAttribute('href', link_salmo);
                document.querySelector('#seconda-lettura').textContent = celebrazione.seconda_lettura_testo || "N/A"; // Seconda Lettura
                document.querySelector('#vangelo').textContent = celebrazione.vangelo || "N/A";
                document.querySelector('#canto-offertorio').textContent = celebrazione.canto_offertorio || "N/A";
                document.querySelector('#canto-comunione').textContent = celebrazione.canto_comunione || "N/A";
                document.querySelector('#antifona-alla-comunione').textContent = celebrazione.antifona_alla_comunione || "N/A";
            } else {
                document.body.innerHTML = `<p class="error">Errore: Celebrazione non trovata per numero ${numero} e anno ${anno}.</p>`;
            }
        }

        document.addEventListener('DOMContentLoaded', function () {
            const { numero, anno } = getQueryParams();

            fetch('db/celebrazioni_anno_a.json')
                .then(response => response.json())
                .then(data => {
                    populatePage(data, numero, anno);
                })
                .catch(error => console.error('Errore nel caricamento del JSON:', error));
        });
    </script>
</head>

<body>
    <div class="navbar" id="myNavbar">
        <h1>Proposta canti</h1>
        <span class="menu-toggle" onclick="toggleMenu()">☰</span>
        <div class="navbar-buttons">
            <button onclick="location.href='../../../index.html'">Home</button>
            <button onclick="location.href='../../../nav-bar/elenco_canti.html'">Elenco canti</button>
            <button onclick="location.href='../../../nav-bar/spartiti_salmi.html'">Spartiti salmi</button>
            <button onclick="location.href='../../../nav-bar/anno_liturgico.html'">Anni liturgici</button>
            <button onclick="location.href='../../../nav-bar/salmi_eventi_speciali.html'">Eventi speciali</button>
            <button onclick="location.href='../../../nav-bar/imp_supporto.html'">Impostazioni/Supporto</button>
        </div>
        <input type="text" placeholder="Cerca canti...">
    </div>

    <div class="responsive-container">
        <h1 id="title"></h1>

        <h2>Antifona d'ingresso</h2>
        <p id="antifona-ingresso"></p>

        <h3>Canto d'ingresso</h3>
        <p id="canto-ingresso"></p>

        <h2>Atto Penitenziale</h2>
        <p id="atto-penitenziale"></p>

        <p id="tropo-1"></p>
        <p id="tropo-2"></p>
        <p id="tropo-3"></p>

        <h2>Prima Lettura</h2>
        <p id="prima-lettura"></p>

        <h2>Salmo Responsoriale</h2>
        <p><a id="link_salmo" href="#" download>Salmo Responsoriale</a></p>
        <p id="salmo"></p> <!-- Salmo -->

        <h2>Seconda Lettura</h2>
        <p id="seconda-lettura"></p> <!-- Seconda Lettura -->

        <h2>Vangelo</h2>
        <p id="vangelo"></p>

        <h3>Canto d'offertorio</h3>
        <p id="canto-offertorio"></p>

        <h3>Canto di comunione</h3>
        <p id="canto-comunione"></p>

        <h2>Antifona alla Comunione</h2>
        <p id="antifona-alla-comunione"></p>
    </div>

    <script>
        function toggleMenu() {
            const navbar = document.getElementById('myNavbar');
            navbar.classList.toggle('active');
        }
    </script>
</body>

</html>